<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tic Tac Toe - Pro Bot First Center Move</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');

/* Reset */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  height: 100vh;
  background: #000000;
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: 'Orbitron', sans-serif;
  user-select: none;
  color: #ff3b3b;
  padding: 20px;
}

main {
  background: #050505;
  border-radius: 24px;
  box-shadow: 0 0 20px #ff3b3b44;
  width: 420px;
  padding: 36px 44px 48px;
  text-align: center;
  border: 2px solid #ff3b3b;
  position: relative;
}

h1 {
  margin-bottom: 16px;
  font-size: 2.6rem;
  text-shadow: 0 0 15px #ff3b3b;
  letter-spacing: 2px;
}

#modeSelect {
  margin-bottom: 28px;
  font-size: 1.1rem;
  font-weight: 700;
  background: #070707;
  border: 2px solid #ff3b3b;
  border-radius: 12px;
  color: #ff3b3b;
  padding: 10px 18px;
  cursor: pointer;
  outline-offset: 4px;
  width: 100%;
  box-shadow: inset 0 0 8px #ff3b3b88;
  transition: background-color 0.3s ease;
}

#modeSelect:hover {
  background-color: #330000;
}

#game {
  display: grid;
  grid-template-columns: repeat(3, 120px);
  grid-template-rows: repeat(3, 120px);
  gap: 20px;
  justify-content: center;
  margin-bottom: 32px;
}

.cell {
  background-color: #070707;
  border-radius: 20px;
  border: 3px solid #ff3b3b;
  box-shadow: inset 0 0 8px #ff3b3b88;
  cursor: pointer;
  font-size: 5rem;
  color: #ff3b3b;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background 0.25s ease, box-shadow 0.25s ease, transform 0.25s ease;
  user-select: none;
  outline-offset: 5px;
  position: relative;
  overflow: hidden;
}

.cell:hover:not(:disabled) {
  background-color: #330000;
  box-shadow: 0 0 35px #ff3b3baa;
  transform: scale(1.1);
}

.cell[data-mark] {
  animation: fadeScaleIn 0.4s ease forwards;
}

@keyframes fadeScaleIn {
  0% {
    opacity: 0;
    transform: scale(0.75);
    text-shadow: none;
  }
  100% {
    opacity: 1;
    transform: scale(1);
    text-shadow: 0 0 10px #ff3b3b, 0 0 25px #ff3b3bcc;
  }
}

.cell:disabled {
  cursor: default;
  color: #660000;
  border-color: #660000;
  box-shadow: inset 0 0 16px #660000;
  background-color: #1a0000;
  transform: none !important;
}

.winner {
  animation: winnerGlow 1.3s ease-in-out infinite alternate;
  border-color: #ff5050 !important;
  color: #ff5050 !important;
  box-shadow: 0 0 45px #ff5050, 0 0 80px #ff5050;
}

@keyframes winnerGlow {
  from {
    text-shadow: 0 0 25px #ff3b3b, 0 0 50px #ff5050;
  }
  to {
    text-shadow: 0 0 45px #ff5050, 0 0 75px #ff5050;
  }
}

#status {
  font-size: 1.5rem;
  font-weight: 700;
  color: #ff3b3b;
  text-shadow: 0 0 9px #ff3b3b;
  margin-bottom: 30px;
  min-height: 2rem;
  user-select: none;
}

#resetBtn {
  background-color: #660000;
  border: none;
  border-radius: 18px;
  padding: 16px 44px;
  font-size: 1.25rem;
  font-weight: 700;
  color: #ffbbbb;
  cursor: pointer;
  box-shadow: 0 0 22px #ff3b3baa;
  transition: background-color 0.35s ease, box-shadow 0.35s ease;
  user-select: none;
  position: relative;
  overflow: hidden;
  width: 100%;
}

#resetBtn:hover {
  background-color: #990000;
  box-shadow: 0 0 42px #ff5050, 0 0 80px #ff3b3b;
}
</style>
</head>
<body>
<main>
  <h1>Tic Tac Toe</h1>
  <select id="modeSelect" aria-label="Select Game Mode">
    <option value="pvp">Player vs Player</option>
    <option value="pvc">Player vs Bot</option>
  </select>
  <div id="status" aria-live="polite" aria-atomic="true">üïπÔ∏è Player X's turn</div>
  <div id="game" role="grid" aria-label="Tic Tac Toe Grid">
    <button class="cell" role="gridcell" aria-pressed="false" aria-label="Cell 1"></button>
    <button class="cell" role="gridcell" aria-pressed="false" aria-label="Cell 2"></button>
    <button class="cell" role="gridcell" aria-pressed="false" aria-label="Cell 3"></button>
    <button class="cell" role="gridcell" aria-pressed="false" aria-label="Cell 4"></button>
    <button class="cell" role="gridcell" aria-pressed="false" aria-label="Cell 5"></button>
    <button class="cell" role="gridcell" aria-pressed="false" aria-label="Cell 6"></button>
    <button class="cell" role="gridcell" aria-pressed="false" aria-label="Cell 7"></button>
    <button class="cell" role="gridcell" aria-pressed="false" aria-label="Cell 8"></button>
    <button class="cell" role="gridcell" aria-pressed="false" aria-label="Cell 9"></button>
  </div>
  <button id="resetBtn" aria-label="Reset Game">Reset Game</button>
</main>

<script>
const cells = document.querySelectorAll('.cell');
const status = document.getElementById('status');
const resetBtn = document.getElementById('resetBtn');
const modeSelect = document.getElementById('modeSelect');

let board = Array(9).fill(null);
let currentPlayer = 'X';
let gameOver = false;
let botFirstMove = true;

const winPatterns = [
  [0,1,2],[3,4,5],[6,7,8],
  [0,3,6],[1,4,7],[2,5,8],
  [0,4,8],[2,4,6]
];

function updateStatus(message) {
  status.textContent = message;
}

function disableAllCells() {
  cells.forEach(cell => cell.disabled = true);
}

function enableEmptyCells() {
  cells.forEach((cell, i) => {
    cell.disabled = board[i] !== null;
  });
}

function checkWin() {
  for (const pattern of winPatterns) {
    const [a,b,c] = pattern;
    if (board[a] && board[a] === board[b] && board[a] === board[c]) {
      return pattern;
    }
  }
  return null;
}

function highlightWinner(pattern) {
  pattern.forEach(i => {
    cells[i].classList.add('winner');
    cells[i].disabled = true;
  });
}

function clearWinningLine() {
  cells.forEach(cell => cell.classList.remove('winner'));
}

function makeMove(i) {
  if (board[i] || gameOver) return;

  board[i] = currentPlayer;
  cells[i].textContent = currentPlayer;
  cells[i].setAttribute('aria-pressed', 'true');
  cells[i].dataset.mark = currentPlayer;
  cells[i].disabled = true;

  const winningCombo = checkWin();

  if (winningCombo) {
    updateStatus(`Player ${currentPlayer} wins! üéâ`);
    highlightWinner(winningCombo);
    gameOver = true;
    disableAllCells();
    return;
  }

  if (board.every(cell => cell !== null)) {
    updateStatus("It's a draw! ü§ù");
    gameOver = true;
    disableAllCells();
    return;
  }

  currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
  updateStatus(`üïπÔ∏è Player ${currentPlayer}'s turn`);
  enableEmptyCells();

  // Bot move if PvC and bot turn
  if (!gameOver && modeSelect.value === 'pvc' && currentPlayer === 'O') {
    setTimeout(botMove, 600);
  }
}

function botMove() {
  if (gameOver) return;

  const emptyIndices = board
    .map((v,i) => v === null ? i : null)
    .filter(v => v !== null);

  if (emptyIndices.length === 0) return;

  // Bot first move: try center if empty
  if (botFirstMove) {
    botFirstMove = false;
    if (board[4] === null) {
      makeMove(4);
      return;
    }
  }

  // Simple AI: try to win/block or random fallback
  let move = findBestMove();
  if (move === null) {
    move = emptyIndices[Math.floor(Math.random() * emptyIndices.length)];
  }
  makeMove(move);
}

// Basic bot logic to block or win in next move
function findBestMove() {
  // Try to win
  for (let i = 0; i < 9; i++) {
    if (!board[i]) {
      board[i] = 'O';
      if (checkWin()) {
        board[i] = null;
        return i;
      }
      board[i] = null;
    }
  }
  // Try to block player win
  for (let i = 0; i < 9; i++) {
    if (!board[i]) {
      board[i] = 'X';
      if (checkWin()) {
        board[i] = null;
        return i;
      }
      board[i] = null;
    }
  }
  return null;
}

function resetGame() {
  board.fill(null);
  gameOver = false;
  botFirstMove = true;

  currentPlayer = 'X';
  updateStatus(`üïπÔ∏è Player X's turn`);
  clearWinningLine();

  cells.forEach(cell => {
    cell.textContent = '';
    cell.classList.remove('winner');
    cell.disabled = false;
    cell.setAttribute('aria-pressed', 'false');
    delete cell.dataset.mark;
  });

  enableEmptyCells();

  // If bot starts first in PvC mode
  if (modeSelect.value === 'pvc' && currentPlayer === 'O') {
    setTimeout(botMove, 600);
  }
}

// Mode change resets game
modeSelect.addEventListener('change', () => {
  if (modeSelect.value === 'pvc') {
    // Player always X, bot always O
    currentPlayer = 'X';
  }
  resetGame();
});

cells.forEach((cell, i) => {
  cell.addEventListener('click', () => makeMove(i));
});

resetBtn.addEventListener('click', resetGame);

resetGame();
</script>
</body>
</html>
